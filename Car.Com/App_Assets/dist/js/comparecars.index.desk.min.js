/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(t,a,o){function r(s,i){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return r(a?a:e)},c,c.exports,e,t,a,o)}return a[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,a){!function(t,a){a(function(){var t=ABT,o=t.ENV,r=o.getJsFileNameByAlias,n=o.libsPath,s=a("body"),i=e("./index_tmpls/desk/tmpls.js"),l=t.PERSONA,c="",p=a("#add_change_car_overlay_js"),d="",u="",m="",f="",v="",h="",g={initSelectedAndDefaultBtns:function(){var e=l.get();return c=e.compareList,c&&c.length>0?g.showSelectedComparItems():g.showDefaultComparItems(),g.wireupCompareButtons(),a("#popCompareBtn1").on("click",function(e){e.preventDefault(),l.set({compareList:"33210,34261"}),window.location="/tools/car-comparison/results/"}),a("#popCompareBtn2").on("click",function(e){e.preventDefault(),l.set({compareList:"34198,32437"}),window.location="/tools/car-comparison/results/"}),a("#popCompareBtn3").on("click",function(e){e.preventDefault(),l.set({compareList:"33802,34217"}),window.location="/tools/car-comparison/results/"}),a("#popCompareBtn4").on("click",function(e){e.preventDefault(),l.set({compareList:"34078,34034"}),window.location="/tools/car-comparison/results/"}),a("#popCompareBtn5").on("click",function(e){e.preventDefault(),l.set({compareList:"33023,32549"}),window.location="/tools/car-comparison/results/"}),a("#popCompareBtn6").on("click",function(e){e.preventDefault(),l.set({compareList:"32397,32718"}),window.location="/tools/car-comparison/results/"}),!0},wireupCompareButtons:function(){a(".js_add_compare_car").on("click",function(e){e.preventDefault(),p.popup("show")}),a(".js_delete_compare_car").on("click",function(e){e.preventDefault();var t=a(this).data("trimid").toString();g.deleteSelectedCompareCar(t)}),a(".js_compare_results").on("click",function(e){e.preventDefault(),window.location="/tools/car-comparison/results/"})},showSelectedComparItems:function(){if(c&&c.length>0){var e="/api/compare/index/trimidlist/"+c,t=a("#selectedCompareTable"),o="";a.get(e).done(function(e){return e.data&&(o=e.data,t.empty().prepend(i.compare_data({carArr:o})),g.wireupCompareButtons()),!0})}},showDefaultComparItems:function(){var e=a("#selectedCompareTable");return e.empty().prepend(i.default_compare_items({})),g.wireupCompareButtons(),!0},deleteSelectedCompareCar:function(e){var t=[];if(e>0){c&&c.length>0&&(t=c.split(","));var a=t.indexOf(e);a>=0&&(t.splice(a,1),c=t.join(),l.set({compareList:c}),c.length>0?g.showSelectedComparItems():g.showDefaultComparItems())}},initAddChangeOverlay:function(){return a.when(a.get("/api/compare/makes/").done(function(e){e.data&&s.append(i.add_change_car_overlay({makeArr:e.data}))})).then(function(){p=a("#add_change_car_overlay_js"),h=a(".overlay-close"),h.on("click",function(e){e.preventDefault(),p.popup("hide")}),d=a("#compareCarModelSelect"),u=a("#compareCarTrimSelect"),a("#compareCarMakeSelect").on("change",function(e){m=a("#compareCarMakeSelect :selected").val(),m.length>0?g.updateCompareModelDropdown():(d.empty().prepend('<option value="">Select a Model</option>').prop("disabled",!0),u.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0))}),d.on("change",function(e){f=a("#compareCarModelSelect :selected").val(),f.length>0?g.updateCompareTrimDropdown():u.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0)}),u.on("change",function(e){var t=[];v=a("#compareCarTrimSelect :selected").val(),v.length>0&&(c&&c.length>0&&(t=c.split(",")),t.indexOf(v)<0&&(t.push(v),c=t.join(),l.set({compareList:c}),p.popup("hide"),g.updateViewedRecentlyList(v),g.showSelectedComparItems()))})}),!0},updateViewedRecentlyList:function(e){var t=l.get(),a=t.viewedRecentlyList,o=[],r=10;a&&a.length>0&&(o=a.split(",")),o.indexOf(e)<0&&(o.push(e),o.length>r&&o.shift()),a=o.join(),l.set({viewedRecentlyList:a})},updateCompareModelDropdown:function(){var e="/api/compare/make/"+m+"/super-models/";a.when(a.get(e).done(function(e){e.data&&(d.empty().prepend(i.model_select_options({modelArr:e.data})).prop("disabled",!1),u.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0))})).then(function(){})},updateCompareTrimDropdown:function(){var e="/api/compare/make/"+m+"/super-model/"+f+"/trims/";a.get(e).done(function(e){e.data&&u.empty().prepend(i.trim_select_options({trimArr:e.data})).prop("disabled",!1)})},init:function(){a.when(g.initSelectedAndDefaultBtns()).then(function(){g.initAddChangeOverlay()})}};a(function(){a.when(a.getCachedScript(n+"/"+r("popup")),l.isReady()).then(function(){g.init()})})})}(window,jQuery)},{"./index_tmpls/desk/tmpls.js":2}],2:[function(e,t,a){t.exports.add_change_car_overlay=function(e){var t='<div id="add_change_car_overlay_js" class="overlay overlay-dk max-450" style="display:none"> <button type="button" class="overlay-close"> <span class="icon"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span> </button> <div class="dead-middle"> <h1>Select a Car</h1> <section class="add-change-car-container" id="" style="display: block"> <form> <p> <label> <select id="compareCarMakeSelect" class="full"> <option value="">Select a Make</option> ',a=e.makeArr;if(a)for(var o,r=-1,n=a.length-1;n>r;)o=a[r+=1],t+=' <option value="'+o.seo_name+'">'+o.name+"</option> ";return t+=' </select> </label> </p> <p> <label> <select id="compareCarModelSelect" class="full" disabled="disabled"> <option value="">Select a Model</option> </select> </label> </p> <p> <label> <select id="compareCarTrimSelect" class="full" disabled="disabled"> <option value="">Select a Vehicle</option> </select> </label> </p> </form> </section> </div></div>'},t.exports.compare_data=function(e){for(var t="",a=0,o=[],r=["name","invoice","msrp"],n=[],s=[0,1],i=0;i<e.carArr.length;i++)o[i]=i;t+=" ";for(var l=0;l<r.length;l++){for(n[l]=[],a=0;a<e.carArr.length;a++)n[l][a]=[],n[l][a]=e.carArr[a][r[l]];t+=" "}t+=" ";var c=s;if(c)for(var p,d=-1,u=c.length-1;u>d;)p=c[d+=1],t+=" ",e.carArr.length>d?(t+=' <button class="btn-tools left js_delete_compare_car" data-trimid="'+e.carArr[d].id+'"> <div style="margin-bottom: 10px; height: 5px; float: right;"><a class="js_delete_compare_car" data-trimid="'+e.carArr[d].id+'" style="z-index: 9000;"> <span class="icon i-close"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span></a></div> ',t+=e.carArr[d].images.length>0?' <picture> <!--[if IE 9]><video style="display: none;"><![endif]--> <source srcset="'+e.carArr[d].images[0].large+'" media="(min-width: 1024px)" /> <source srcset="'+e.carArr[d].images[0].medium+'" media="(min-width: 640px)" /> <source srcset="'+e.carArr[d].images[0].small+'" media="(min-width: 320px)" /> <!--[if IE 9]></video><![endif]--> <img src="'+e.carArr[d].images[0].small+'" alt="'+e.carArr[d].year+" "+e.carArr[d].make+" "+e.carArr[d].model+'"> </picture> ':' <img src="/assets/svg/no-image-avail.svg" alt="'+e.carArr[d].year+" "+e.carArr[d].make+" "+e.carArr[d].model+'"> ',t+=' <h3 class="heading">'+e.carArr[d].year+" "+e.carArr[d].make+" "+e.carArr[d].model+"</h3> </button> "):t+=' <button class="btn-tools left js_add_compare_car"> <span class="icon i-select-car"> <svg  viewbox="0 0 1986 1024"> <use xlink:href="/assets/svg/global-sprite.svg#filter-icon-vehiclecategory-luxurycar"></use> </svg> </span> <h3 class="heading">Select a Car</h3> </button> ';return t+="   "},t.exports.default_compare_items=function(e){var t='<button class="btn-tools left js_add_compare_car"> <span class="icon i-select-car"> <svg  viewbox="0 0 1986 1024"> <use xlink:href="/assets/svg/global-sprite.svg#filter-icon-vehiclecategory-luxurycar"></use> </svg> </span> <h3 class="heading">Select a Car</h3></button><button class="btn-tools left js_add_compare_car"> <span class="icon i-select-car"> <svg  viewbox="0 0 1986 1024"> <use xlink:href="/assets/svg/global-sprite.svg#filter-icon-vehiclecategory-luxurycar"></use> </svg> </span> <h3 class="heading">Select a Car</h3></button><!--<button class="btn-tools left js_add_compare_car"> <span class="icon i-select-car"> <svg  viewbox="0 0 1986 1024"> <use xlink:href="/assets/svg/global-sprite.svg#filter-icon-vehiclecategory-luxurycar"></use> </svg> </span> <h3 class="heading">Select a Car</h3></button>-->';return t},t.exports.model_select_options=function(e){var t='<option value="">Select a Model</option>',a=e.modelArr;if(a)for(var o,r=-1,n=a.length-1;n>r;)o=a[r+=1],t+='<option value="'+o.seo_name+'">'+o.name+"</option>";return t},t.exports.trim_select_options=function(e){var t='<option value="">Select a Vehicle</option>',a=e.trimArr;if(a)for(var o,r=-1,n=a.length-1;n>r;)o=a[r+=1],t+='<option value="'+o.id+'">'+o.year+" "+o.name+"</option>";return t}},{}]},{},[1]);