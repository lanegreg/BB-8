/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(t,r,i){function a(s,l){if(!r[s]){if(!t[s]){var n="function"==typeof require&&require;if(!l&&n)return n(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return a(r?r:e)},c,c.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,r){!function(t,r){r(function(){var t=e("../../modules/abt-filters"),i=ABT,a=i.ENV,o=a.getJsFileNameByAlias,s=a.libsPath,l={init:function(){for(var e=r("[id^='js-disablesupertrim']"),i=0;i<e.length;i++){var a=e[i].id;l.setShowHideTrimButtonClickHandler(a)}var o=r("[id^='js-filter-icon']");for(i=0;i<o.length;i++){var s=o[i].id;l.setFilterButtonClickHandler(s)}var n=r("[id^='js-show-all-trims']");for(i=0;i<n.length;i++){var c=n[i].id;l.setShowAllTrimsButtonClickHandler(c)}l.setYearSelectorClickHandler();var d=ABT.ADS.pageCtx.makeseoname,u=ABT.ADS.pageCtx.supermodelseoname,p=ABT.ADS.pageCtx.year;t.setSuperModelFilterGroupsByYear(d,u,p),t.setSuperModelTrimFilterAttributesByYear(d,u,p),r("img.lazy").lazyload()},showHideTrimBlock:function(e){var t=e.replace("js-disablesupertrim","js-trimcollection");if(!r("#"+e).hasClass("disabled")){"none"==r("#"+t).css("display")?r("#"+t).css("display","block"):r("#"+t).css("display","none");var i=r("#overlay"+t);i.popup({blur:!1}),i.popup("show");var a=r(".overlay-close");a.on("click",function(e){r("#"+t).css("display","none"),i.popup("hide")})}},setShowAllTrimsButtonClickHandler:function(e){r("#"+e).on("click",function(e){t.showAllTrims()})},setShowHideTrimButtonClickHandler:function(e){r("#"+e).on("click",function(e){l.showHideTrimBlock(this.id)})},setFilterButtonClickHandler:function(e){r("#"+e).on("click",function(e){t.applyFilters(this.id)})},setYearSelectorClickHandler:function(){r("#js-yearsupermodel-year-select").on("change",function(e){var t=ABT.ADS.pageCtx.make,i=ABT.ADS.pageCtx.supermodelseoname,a=r("#js-yearsupermodel-year-select").val(),o="/"+t.toLowerCase()+"/"+i.toLowerCase()+"/"+a;location.assign(o)})}};r(function(){r.when(r.getCachedScript(s+"/"+o("popup")).then(function(){t.init(),l.init()}))})})}(window,jQuery)},{"../../modules/abt-filters":2}],2:[function(e,t,r){var i=function(){var e={},t=1;return{init:function(){},setSuperModelFilterGroups:function(e,t){var r="/api/research-filter/supermodelfiltergroups/",a="{makename: '"+e+"', supermodelname: '"+t+"'}";$.post(r,{"":a}).done(function(e){for(var t=e.data.supermodelfiltergroups,r=0;r<t.length;r++){var a=t[r].filtergroupname.toLowerCase(),o=t[r].code.toLowerCase(),s=i.mapFilter2Icon(a,o),l="js-filter-icon-"+a.toLowerCase()+"-"+s.toLowerCase();$("#"+l).css("display","table-cell");var n="js-filter-options-"+a.toLowerCase();$("#"+n).css("display","inline-block")}})},setSuperModelTrimFilterAttributes:function(r,a){var o="/api/research-filter/supermodeltrimfilterattributes/",s="{makename: '"+r+"', supermodelname: '"+a+"'}";$.post(o,{"":s}).done(function(o){null===o.data?2>t&&(t++,i.setSuperModelTrimFilterAttributes(r,a)):e=o.data.supermodeltrimfilterattributes})},setSuperModelFilterGroupsByYear:function(e,t,r){var a="/api/research-filter/supermodelfiltergroupsbyyear/",o="{makename: '"+e+"', supermodelname: '"+t+"', year: '"+r+"'}";$.post(a,{"":o}).done(function(e){for(var t=e.data.supermodelfiltergroups,r=0;r<t.length;r++){var a=t[r].filtergroupname.toLowerCase(),o=t[r].code.toLowerCase(),s=i.mapFilter2Icon(a,o),l="js-filter-icon-"+a.toLowerCase()+"-"+s.toLowerCase();$("#"+l).css("display","table-cell");var n="js-filter-options-"+a.toLowerCase();$("#"+n).css("display","inline-block")}})},setSuperModelTrimFilterAttributesByYear:function(r,a,o){var s="/api/research-filter/supermodeltrimfilterattributesbyyear/",l="{makename: '"+r+"', supermodelname: '"+a+"', year: '"+o+"'}";$.post(s,{"":l}).done(function(s){null===s.data?2>t&&(t++,i.setSuperModelTrimFilterAttributesByYear(r,a,o)):e=s.data.supermodeltrimfilterattributes})},setCategoryFilterGroups:function(e){var t="/api/research-filter/categoryfiltergroups/",r="{categoryname: '"+e+"'}";$.post(t,{"":r}).done(function(e){for(var t=e.data.categoryfiltergroups,r=0;r<t.length;r++){var a=t[r].filtergroupname.toLowerCase(),o=t[r].code.toLowerCase(),s=i.mapFilter2Icon(a,o),l="js-filter-icon-"+a.toLowerCase()+"-"+s.toLowerCase();$("#"+l).css("display","table-cell");var n="js-filter-options-"+a.toLowerCase();$("#"+n).css("display","inline-block")}})},setCategoryTrimFilterAttributes:function(r){var a="/api/research-filter/categorytrimfilterattributes/",o="{categoryname: '"+r+"'}";$.post(a,{"":o}).done(function(a){null===a.data?2>t&&(t++,i.setCategoryTrimFilterAttributes(r)):e=a.data.categorytrimfilterattributes})},setVehicleAttributeFilterGroups:function(e,t){var r="/api/research-filter/vehicleattribute/categoryfiltergroups/",a="{categoryname: '"+e+"', vehicleattributeseoname: '"+t+"'}";$.post(r,{"":a}).done(function(e){for(var t=e.data.categoryfiltergroups,r=0;r<t.length;r++){var a=t[r].filtergroupname.toLowerCase(),o=t[r].code.toLowerCase(),s=i.mapFilter2Icon(a,o),l="js-filter-icon-"+a.toLowerCase()+"-"+s.toLowerCase();$("#"+l).css("display","table-cell");var n="js-filter-options-"+a.toLowerCase();$("#"+n).css("display","inline-block")}})},setVehicleAttributeTrimFilterAttributes:function(r,a){var o="/api/research-filter/vehicleattribute/categorytrimfilterattributes/",s="{categoryname: '"+r+"', vehicleattributeseoname: '"+a+"'}";$.post(o,{"":s}).done(function(o){null===o.data?2>t&&(t++,i.setVehicleAttributeTrimFilterAttributes(r,a)):e=o.data.categorytrimfilterattributes})},setVehicleAttributeNoCategoryFilterGroups:function(e){var t="/api/research-filter/vehicleattributeonly/categoryfiltergroups/",r="{vehicleattributeseoname: '"+e+"'}";$.post(t,{"":r}).done(function(e){for(var t=e.data.categoryfiltergroups,r=0;r<t.length;r++){var a=t[r].filtergroupname.toLowerCase(),o=t[r].code.toLowerCase(),s=i.mapFilter2Icon(a,o),l="js-filter-icon-"+a.toLowerCase()+"-"+s.toLowerCase();$("#"+l).css("display","table-cell");var n="js-filter-options-"+a.toLowerCase();$("#"+n).css("display","inline-block")}})},setVehicleAttributeNoCategoryTrimFilterAttributes:function(r){var a="/api/research-filter/vehicleattributeonly/categorytrimfilterattributes/",o="{vehicleattributeseoname: '"+r+"'}";$.post(a,{"":o}).done(function(a){null===a.data?2>t&&(t++,i.setVehicleAttributeNoCategoryTrimFilterAttributes(r)):e=a.data.categorytrimfilterattributes})},applyFilters:function(t){var r=!0;$("#"+t).hasClass("selected")&&($("#"+t).removeClass("selected"),r=!1);for(var a=$(".selected"),o=[],s=0;s<a.length;s++)-1!=a[s].id.indexOf("js-filter-icon")&&o.push(a[s].id);if(r===!0&&o.push(t),0===o.length){for(var l=$("[id^='js-trimrow']"),n=0;n<l.length;n++){var c=l[n].id;$("#"+c).css("display","table-row-group")}i.updateButtonCounts()}else i.updateDomWithFilterCriteria(e,o)},updateDomWithFilterCriteria:function(e,t){for(var r=$("[id^='js-trimrow']"),a=0;a<r.length;a++){var o=r[a].id;$("#"+o).css("display","none")}for(var s={},l=0;l<t.length;l++){for(var n=t[l],c="",d=0;d<e.length;d++){var u=e[d].id,p={};p.bodystyle=e[d].bodystyle,p.drivetrain=e[d].drivetrain,p.engine=e[d].enginetype,p.enginesize=e[d].enginesize,p.fueltype=e[d].fueltype,p.transmission=e[d].transmission,p.bedlength=e[d].bedlength,p.towingcapacity=e[d].towingcapacity,p.seating=e[d].seating,p.cargocapacity=e[d].cargocapacity,p.navigation=e[d].navigation,p.driverange=e[d].driverange,p.vehiclecategory=e[d].vehiclecategory,$.each(p,function(e,t){var r=e.toLowerCase(),a=n.split("-")[3].toLowerCase();if(a==r){var o=t.toLowerCase(),l=i.mapFilter2Icon(r,o),d="js-trimrow-"+u,p=n.split("-")[4].toLowerCase();if(l==p){$("#"+d).css("display","table-row-group"),c=r;var f=s[r];s[r]=f+"|"+d}}})}$("#"+n).addClass("selected")}var f=0;if($.each(s,function(e,t){f++}),f>1)for(var m=0;m<e.length;m++){var v="js-trimrow-"+e[m].id,g=!0,h=!0;$.each(s,function(e,t){g=t.indexOf(v)>0,g===!1&&(h=!1)}),h===!1&&$("#"+v).css("display","none")}i.updateButtonCounts()},mapFilter2Icon:function(e,t){var r=t;return"drivetrain"==e&&"4wheeldrive"==t&&(r="allwheeldrive"),"engine"==e&&"10cylinderfamily"==t&&(r="8cylinderfamily"),r},showAllTrims:function(){for(var e=$("[id^='js-trimrow']"),t=0;t<e.length;t++){var r=e[t].id;$("#"+r).css("display","table-row-group")}for(var a=$("[id^='js-filter-icon']"),o=0;o<a.length;o++){var s=a[o].id;$("#"+s).hasClass("selected")&&$("#"+s).removeClass("selected")}i.updateButtonCounts()},updateButtonCounts:function(){for(var e=0,t=$("[id^='js-trimcollection']"),r=1,i=0;i<t.length;i++){var a=0,o=0,s=5e6,l=t[i],n=l.id.replace("js-trimcollection-",""),c=l.getElementsByClassName("tab-body-wrapper"),d=c[0],u=d.getElementsByClassName("tab-body"),p=0;if(void 0!==u[0]){var f=u[0].childNodes[1],m=f.childNodes[1];for(p=0;p<m.childNodes.length;p++){var v=m.childNodes[p];void 0!==v.id&&-1!=v.id.indexOf("js-trimrow")&&"table-row-group"==$("#"+v.id).css("display")&&(a++,e++,o=$("#"+v.id).data("trim-msrp"),s>o&&(s=o))}}if(void 0!==u[1]){var g=u[1].childNodes[1],h=g.childNodes[1];for(p=0;p<h.childNodes.length;p++){var y=h.childNodes[p];void 0!==y.id&&-1!=y.id.indexOf("js-trimrow")&&"table-row-group"==$("#"+y.id).css("display")&&(a++,e++,o=$("#"+y.id).data("trim-msrp"),s>o&&(s=o))}}if(void 0!==u[2]){var b=u[2].childNodes[1],w=b.childNodes[1];for(p=0;p<w.childNodes.length;p++){var C=w.childNodes[p];void 0!==C.id&&-1!=C.id.indexOf("js-trimrow")&&"table-row-group"==$("#"+C.id).css("display")&&(a++,e++,o=$("#"+C.id).data("trim-msrp"),s>o&&(s=o))}}var j=$("#js-viewtrimcollectionbutton-"+n);j[0].innerHTML='<span class="trim-count">'+a+" <small>trims</small></span>";var L=$("#js-trimmsrp-"+n);5e6>s&&(L[0].innerHTML='<small class="sub">starting at</small><span class="item">$'+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</span>");var A="js-disablesupertrim-"+n;if(0===a)$("#"+A).hasClass("reflow")&&$("#"+A).removeClass("reflow"),$("#"+A).css("display","none");else{if(50>r){var F=$("#js-togglesupertrimimage-"+n),B=F.data("img-src-placeholder");void 0!==B&&(F.attr("src",B),r++)}$("#"+A).css("display","block"),$("#"+A).addClass("reflow")}}var T=$("#js-totaltrimscount1");T[0].innerHTML=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" <small>trims</small>"}}}();t.exports=i},{}]},{},[1]);