/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(t,a,i){function n(s,r){if(!a[s]){if(!t[s]){var o="function"==typeof require&&require;if(!r&&o)return o(s,!0);if(l)return l(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return n(a?a:e)},c,c.exports,e,t,a,i)}return a[s].exports}for(var l="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,a){!function(t,a,i){var n=i.UTILS.hasSessionStorage;a(function(){var l=i.ENV,s=(l.getJsFileNameByAlias,l.libsPath,a("body")),r=e("./paymentestimate_tmpls/desk/tmpls.js"),o=a("#add_change_car_overlay_js"),c="",m="",p="",d="",u="",_="",h="",v="",y="",f="",g="",b="",P="",E="",S={init:function(){if(a("#resultdiv_js").css("display","none"),a("#calc_form_div_js").css("display","block"),a("#btnCalculateMonthlyPayment").on("click",function(e){e.preventDefault(),S.calculateCarPayment()}),a("#PaymentEstimate_purchasePrice").on("click",function(e){a("#PaymentEstimate_purchasePrice").val(""),a("#js_selected_trim_label").html(""),_="",y=""}),a("#js_add_compare_car").on("click",function(e){e.preventDefault(),o.popup("show")}),n){var e=JSON.parse(t.sessionStorage.getItem("jsCalcPaymentEstimate"));null!==e&&(a("#PaymentEstimate_purchasePrice").val(e.purchasePrice),a("#PaymentEstimate_cashRebate").val(e.cashRebate),a("#PaymentEstimate_tradeIn").val(e.tradeIn),a("#PaymentEstimate_tradeInOwed").val(e.tradeInOwed),a("#PaymentEstimate_downPayment").val(e.downPayment),a("#PaymentEstimate_interestRate").val(e.interestRate),a("#PaymentEstimate_termMonths").val(e.termMonths),_=e.trimid,y=e.trimlabel),y.length>0&&a("#js_selected_trim_label").html(y)}},calculateCarPayment:function(){var e,i=a("#PaymentEstimate_purchasePrice").val().replace(/[^0-9.]+/g,""),l=a("#PaymentEstimate_cashRebate").val().replace(/[^0-9.]+/g,""),s=a("#PaymentEstimate_tradeIn").val().replace(/[^0-9.]+/g,""),r=a("#PaymentEstimate_tradeInOwed").val().replace(/[^0-9.]+/g,""),o=a("#PaymentEstimate_downPayment").val().replace(/[^0-9.]+/g,""),c=a("#PaymentEstimate_interestRate").val().replace(/[^0-9.]+/g,""),m=a("#PaymentEstimate_termMonths").val().replace(/[^0-9.]+/g,""),p=Number(s)-Number(r),d=Number(o)+Number(l),u=p+d,h=Number(i)-u,v=Number(c)/100/12,f=h*(v+v/(Math.pow(1+v,Number(m))-1));e=isNaN(f)?"Please check your entries... Only numbers allowed!":Number(m)<1?"Term of loan must be at least 1 month":"$"+f.toFixed(2)+"/month for "+m+" months",a("#PaymentEstimate_monthlyPayment").text(e),a("#resultdiv_js").css("display","block"),a("#calc_form_div_js").css("display","none"),n&&t.sessionStorage.setItem("jsCalcPaymentEstimate",JSON.stringify({purchasePrice:i,cashRebate:l,tradeIn:s,tradeInOwed:r,downPayment:o,interestRate:c,termMonths:m,trimid:_,trimlabel:y})),5===_.length?S.showSimilarVehicles(_):S.showSimilarVehiclesByPrice(i)},showSimilarVehicles:function(e){var t="/api/research/similarvehicles/",i="{trimid: '"+e+"'}",n="";a.post(t,{"":i}).done(function(e){n=e.data,null===n||n.length<1||(a("#js_similar_vehicles_content").empty().prepend(r.similar_vehicles({trimlist:n})),a("#js_similar_vehicles").show())})},showSimilarVehiclesByPrice:function(e){var t="/api/research/similarvehiclesbyprice/",i="{price: '"+e+"'}",n="";a.post(t,{"":i}).done(function(e){n=e.data,null===n||n.length<1||(a("#js_similar_vehicles_content").empty().prepend(r.similar_vehicles({trimlist:n})),a("#js_similar_vehicles").show())})},initAddChangeOverlay:function(){return a.when(a.get("/api/compare/makes/").done(function(e){e.data&&s.append(r.add_change_car_overlay({makeArr:e.data}))})).then(function(){o=a("#add_change_car_overlay_js"),E=a(".overlay-close"),E.on("click",function(e){e.preventDefault(),o.popup("hide")}),c=a("#paymentEstimateModelSelect"),m=a("#paymentEstimateTrimSelect"),a("#paymentEstimateMakeSelect").on("change",function(e){p=a("#paymentEstimateMakeSelect :selected").val(),p.length>0?S.updateCompareModelDropdown():(c.empty().prepend('<option value="">Select a Model</option>').prop("disabled",!0),m.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0))}),c.on("change",function(e){d=a("#paymentEstimateModelSelect :selected").val(),d.length>0?S.updateCompareTrimDropdown():m.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0)}),m.on("change",function(e){u=a("#paymentEstimateTrimSelect :selected").text(),f=a("#paymentEstimateTrimSelect :selected").val(),_=f.split("|")[1],g=f.split("|")[0],v=u.substring(0,4),h=u.substring(5),b=p.charAt(0).toUpperCase()+p.substring(1),P=d.charAt(0).toUpperCase()+d.substring(1),y=v+" "+b+" "+P+" "+h,g.length>0&&(a("#PaymentEstimate_purchasePrice").val(g),a("#js_selected_trim_label").html(y),o.popup("hide"))})}),!0},updateCompareModelDropdown:function(){var e="/api/compare/make/"+p+"/super-models/";a.when(a.get(e).done(function(e){e.data&&(c.empty().prepend(r.model_select_options({modelArr:e.data})).prop("disabled",!1),m.empty().prepend('<option value="">Select a Vehicle</option>').prop("disabled",!0))})).then(function(){})},updateCompareTrimDropdown:function(){var e="/api/compare/make/"+p+"/super-model/"+d+"/trims/";a.get(e).done(function(e){e.data&&m.empty().prepend(r.trim_select_options({trimArr:e.data})).prop("disabled",!1)})}};a(function(){S.init(),S.initAddChangeOverlay()})})}(window,jQuery,ABT)},{"./paymentestimate_tmpls/desk/tmpls.js":2}],2:[function(e,t,a){t.exports.add_change_car_overlay=function(e){var t='<div id="add_change_car_overlay_js" class="overlay overlay-dk max-450" style="display:none"> <button type="button" class="overlay-close"> <span class="icon"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span> </button> <div class="dead-middle"> <section class="add-change-car-container" id="" style="display: block"> <form> <h1>Select a Car</h1> <p> <label> <select id="paymentEstimateMakeSelect" class="full"> <option value="">Select a Make</option> ',a=e.makeArr;if(a)for(var i,n=-1,l=a.length-1;l>n;)i=a[n+=1],t+=' <option value="'+i.seo_name+'">'+i.name+"</option> ";return t+=' </select> </label> </p> <p> <label> <select id="paymentEstimateModelSelect" class="full" disabled="disabled"> <option value="">Select a Model</option> </select> </label> </p> <p> <label> <select id="paymentEstimateTrimSelect" class="full" disabled="disabled"> <option value="">Select a Vehicle</option> </select> </label> </p> </form> </section> </div></div>'},t.exports.model_select_options=function(e){var t='<option value="">Select a Model</option>',a=e.modelArr;if(a)for(var i,n=-1,l=a.length-1;l>n;)i=a[n+=1],t+='<option value="'+i.seo_name+'">'+i.name+"</option>";return t},t.exports.similar_vehicles=function(e){var t="",a=e.trimlist;if(a)for(var i,n=-1,l=a.length-1;l>n;)i=a[n+=1],t+=' <div class="sugged-item"> <a href="/'+i.make_seo+"/"+i.super_model_seo+"/"+i.year+"/"+i.trim_seo_name+'/"> <div class="img-container"> ',t+=i.image_path&&i.image_path.length>9?' <img src="'+i.image_path+'" alt="'+i.full_display_name+'"> ':' <img src="/assets/svg/no-image-avail.svg" alt="'+i.full_display_name+'"> ',t+=' </div> <h3 class="sugged-title"> '+i.full_display_name+"<br /> <small>Starting at</small><br /> "+i.starting_msrp+" </h3> </a> </div>";return t},t.exports.trim_select_options=function(e){var t='<option value="">Select a Vehicle</option>',a=e.trimArr;if(a)for(var i,n=-1,l=a.length-1;l>n;)i=a[n+=1],t+='<option value="'+i.msrp+"|"+i.id+'">'+i.year+" "+i.name+"</option>";return t}},{}]},{},[1]);