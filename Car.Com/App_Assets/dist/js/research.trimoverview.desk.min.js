/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(t,a,i){function n(s,l){if(!a[s]){if(!t[s]){var o="function"==typeof require&&require;if(!l&&o)return o(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var m=a[s]={exports:{}};t[s][0].call(m.exports,function(e){var a=t[s][1][e];return n(a?a:e)},m,m.exports,e,t,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,a){"use strict";!function(t,a,i){var n="click",r=i.UTILS.hasSessionStorage;a(function(){var s=i.ENV,l=i.pageJson.vehicleinfo,o=s.getJsFileNameByAlias,m=s.getScriptUriByName,u=i.ENV.libsPath,c="",p=!1,d=e("./trimoverview_tmpls/desk/tmpls.js"),_=a("#display_trim_list"),g=i.PERSONA,f={init:function(){f.updateViewedRecentlyList(),a.when(f.wireupGetQuoteButtons(),f.initCarsForSaleWidget(),f.initViewedRecentlyWidget()).then(function(){f.wireupTrimListOverlayLinks(),f.showSimilarVehicles(),f.wireupCalculator(),f.wireupDisclaimer(),f.updateBygData()})},updateViewedRecentlyList:function(){var e=g.get(),t=e.viewedRecentlyList,a=[],i=l.trimid.toString(),n=10;if(t&&t.length>0&&(a=t.split(",")),a.indexOf(i)<0)a.push(i),a.length>n&&a.shift();else{var r=a.indexOf(i);r>=0&&(a.splice(r,1),a.push(i))}t=a.join(),g.set({viewedRecentlyList:t})},initCarsForSaleWidget:function(){a.when(a.getCachedScript(m(o("c4swidget")))).then(function(){i.WDG.c4s.init({make:l.make,model:l.model})})},initViewedRecentlyWidget:function(){a.when(a.getCachedScript(m(o("viewedrecentlywidget")))).then(function(){i.WDG.viewedrecently.init({currentTrim:l.trimid})})},updateBygData:function(){l.make&&l.model&&l.make.length>2&&l.model.length>0&&ABT.OFR.updateBygMakeModel(l.make,l.model)},showSimilarVehicles:function(){var e=l.trimid,t="/api/research/similarvehicles/",i="{trimid: '"+e+"'}",n="";a.post(t,{"":i}).done(function(e){n=e.data,null===n||n.length<1||(a("#js_similar_vehicles_content").empty().prepend(d.similar_vehicles({trimlist:n})),a("#js_similar_vehicles").show())})},showSelectedTrimList:function(e){var t=ABT.pageJson.getaquote.make,i=ABT.pageJson.getaquote.supermodel,n=ABT.pageJson.getaquote.year,r="/api/research/supertrim/trimlist/",s="{make: '"+t+"', supermodel: '"+i+"', year: '"+n+"', supertrim: '"+e+"'}",l="";a("#js_ol_supertrim").text(e),a.post(r,{"":s}).done(function(e){l=e.data,null===l||l.length<1?_.popup("show"):(a("#js_ol_trimlist").empty().prepend(d.trimlist_by_supertrim({trimlist:l})),_.popup("show"))}),_.popup("show")},calculateCarPayment:function(){var e,i=a("#PaymentEstimate_purchasePrice").val().replace(/[^0-9.]+/g,""),n=a("#PaymentEstimate_cashRebate").val().replace(/[^0-9.]+/g,""),s=a("#PaymentEstimate_tradeIn").val().replace(/[^0-9.]+/g,""),l=a("#PaymentEstimate_tradeInOwed").val().replace(/[^0-9.]+/g,""),o=a("#PaymentEstimate_downPayment").val().replace(/[^0-9.]+/g,""),m=a("#PaymentEstimate_interestRate").val().replace(/[^0-9.]+/g,""),u=a("#PaymentEstimate_termMonths").val().replace(/[^0-9.]+/g,""),c=Number(s)-Number(l),p=Number(o)+Number(n),d=c+p,_=Number(i)-d,g=_*Number(m)/100,f=_+g,y=f/Number(u);e=isNaN(y)?"Please check your entries... Only numbers allowed!":Number(u)<1?"Term of loan must be at least 1 month":"$"+y.toFixed(2)+"/month for "+u+" months",a("#PaymentEstimate_monthlyPayment").text(e),a("#resultDiv").css("display","block"),r&&t.sessionStorage.setItem("calc-payment",JSON.stringify({rebate:n,tradeIn:s,owedOnTradeIn:l,downPayment:o,interestRate:m,moTerms:u}))},wireupTrimListOverlayLinks:function(){a(".js_trimoverlay").on(n,function(e){e.preventDefault(),f.showSelectedTrimList(a(this).data("supertrim").toString())}),a(".overlay-close").on(n,function(e){e.preventDefault(),_.popup("hide")})},wireupCalculator:function(){a("#open_calculator_overlay_js").on(n,function(e){if(e.preventDefault(),r){var i=JSON.parse(t.sessionStorage.getItem("calc-payment"));null!==i&&(a("#PaymentEstimate_cashRebate").val(i.rebate),a("#PaymentEstimate_tradeIn").val(i.tradeIn),a("#PaymentEstimate_tradeInOwed").val(i.owedOnTradeIn),a("#PaymentEstimate_downPayment").val(i.downPayment),a("#PaymentEstimate_interestRate").val(i.interestRate),a("#PaymentEstimate_termMonths").val(i.moTerms))}a("#overlay_calculate_car_payment_js").popup("show")}),a("#close_calculator_overlay_js").on(n,function(e){e.preventDefault(),a("#overlay_calculate_car_payment_js").popup("hide")}),a("#calculator_reset_js").on(n,function(e){a("#resultDiv").css("display","none")}),a("#btnCalculateMonthlyPayment").on(n,function(e){e.preventDefault(),f.calculateCarPayment()})},wireupDisclaimer:function(){var e=a("#disclaimer_js");a("#disclaimer_btn_js").on(n,function(t){t.preventDefault(),e.slideToggle()})},wireupGetQuoteButtons:function(){a(".js_get_quote_btn").on(n,function(e){if(e.preventDefault(),p)ABT.pageJson&&ABT.pageJson.getaquote&&(ABT.pageJson.getaquote.quoteButtonSelected=!0,ABT.pageJson.getaquote.make&&ABT.pageJson.getaquote.make.length>0&&a("#ncLeadMakeSelect").val(ABT.pageJson.getaquote.make).change()),a("#ol_display_ymm").hide(),a("#ol_personalinfo_ymm").hide(),a("#ol_form_ymm").show(),a("#ol_Leadform").css("display","block"),a("#ol_ofr_Thankyou").css("display","none"),c=a("#leadform_overlay_js"),c.popup("show");else{ABT.pageJson&&ABT.pageJson.getaquote&&(ABT.pageJson.getaquote.quoteButtonSelected=!0);var t=o("ofrsystem");a.getCachedScript(m(t)),p=!0}})}};a(function(){a.when(a.getCachedScript(u+"/"+o("popup")),a.getCachedScript(u+"/"+o("picfill")),g.isReady()).then(function(){f.init()})})})}(window,jQuery,ABT)},{"./trimoverview_tmpls/desk/tmpls.js":2}],2:[function(e,t,a){t.exports.similar_vehicles=function(e){var t="",a=e.trimlist;if(a)for(var i,n=-1,r=a.length-1;r>n;)i=a[n+=1],t+=' <div class="sugged-item"> <a href="/'+i.make_seo+"/"+i.super_model_seo+"/"+i.year+"/"+i.trim_seo_name+'/"> <div class="img-container"> ',t+=i.image_path&&i.image_path.length>9?' <img src="'+i.image_path+'" alt="'+i.full_display_name+'"> ':' <img src="/assets/svg/no-image-avail.svg" alt="'+i.full_display_name+'"> ',t+=' </div> <h3 class="sugged-title"> '+i.full_display_name+"<br /> <small>Starting at</small><br /> "+i.starting_msrp+" </h3> </a> </div>";return t},t.exports.trimlist_by_supertrim=function(e){var t="",a=e.trimlist;if(a)for(var i,n=-1,r=a.length-1;r>n;)i=a[n+=1],t+=' <div class="row">  <a class="link-group" href="/'+i.make_seo+"/"+i.super_model_seo+"/"+i.year+"/"+i.trim_seo_name+'/" title="'+i.full_display_name+'"><div class="col1">'+i.full_display_name+'</div><div class="col2"><small>Starting at</small>'+i.starting_msrp+"</div></a> </div>";return t}},{}]},{},[1]);