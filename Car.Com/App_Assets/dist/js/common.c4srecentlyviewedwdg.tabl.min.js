/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(r,t,n){function a(c,s){if(!t[c]){if(!r[c]){var l="function"==typeof require&&require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+c+"'")}var d=t[c]={exports:{}};r[c][0].call(d.exports,function(e){var t=r[c][1][e];return a(t?t:e)},d,d.exports,e,r,t,n)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<n.length;c++)a(n[c]);return a}({1:[function(e,r,t){r.exports.car_for_sale=function(e){var r="",t=e.cars;if(t)for(var n,a=-1,i=t.length-1;i>a;){n=t[a+=1];var c=n.imgUrl,s=n.price,l=n.mileage,d=n.city,o=n.state,u=n.year,p=n.make,h=n.model,g=(n.url,n.vin);r+=' <div class="vwrec_card_js widget-list-item"> <!--<div class="vwrec_card_js widget-list-item" style="',a>=e.maxToShow&&(r+="display:none"),r+='">--> <div class="img-container has-chkbox"> ',r+=c.length?' <img src="'+c+'" alt="" style="width:100%;" /> ':' <img src="/assets/svg/no-image-avail_4x3.svg" alt="" style="width:100%;"/> ',r+=" ",a-parseInt(e.recentsPerPage)>=0&&(r+=' <span id="suggested_vehicle_label" class="img-label suggested">SUGGESTED</span> '),r+=' <label for="'+g+a+'"> <input id="'+g+a+'" name="'+g+a+'" value="Selected" type="checkbox" /> Select </label> </div> <a href="/cars-for-sale/vehicle-details/?q='+n.dealerId+"|"+n.id+"|"+e.zipcode+"|"+n.make_id+"|"+n.model+'" title="View this vehicle"> <div class="desc"> <span class="data secondary-data">'+u+", "+p+", "+h+'</span> <span class="data secondary-data"><small>VIN '+g+'</small></span> <span class="data secondary-data">'+l+' Miles</span> <span class="data secondary-data">'+d+", "+o+'</span> <span class="data primary-data"><strong>$'+s+"</strong></span> <!--",0===a&&(r+=' <div class="cur-viewed-cont"> <FONT style="BACKGROUND-COLOR: white">&nbsp;Currently Viewing&nbsp;</FONT> </div> '),r+='--> </div> <div> <input type="hidden" id="vin" name="vin" value="'+g+'">  <input type="hidden" id="carId" name="carId" value="'+n.id+'">  <input type="hidden" id="make" name="make" value="'+p+'">  <input type="hidden" id="model" name="model" value="'+h+'">  <input type="hidden" id="year" name="year" value="'+u+'">  <input type="hidden" id="dealerId" name="dealerId" value="'+n.dealerId+'">  <input type="hidden" id="dealerPhone" name="dealerPhone" value="'+n.phone+'">  </div> </a> </div> '}return r},r.exports.widget_wrap=function(e){var r='<div id="c4s_recvwd_wdg_wrap_js"> <h3 class="widget-heading">Recently Viewed</h3> <div id="c4s_varray"> <div id="c4s_recvwd_wdg_cars_wrap_js"></div> </div> <!--<button id="vwrec_wdg_showall_btn_js" class="btn-default block" style="display:none">See More +</button>--> <div align="center"> <p><label for="c4s_wdg_checkAll"><input type="checkbox" id="c4s_wdg_checkAll" />Select All</label></p> </div> <div align="center"> <button id="c4s_wdg_getpricing_btn_js" class="leadoverlay_pop_btn_js btn-primary block">Get Pricing</button> </div></div>';return r}},{}],2:[function(e,r,t){"use strict";!function(r,t,n,a){var i,c,s,l,d,o=(n.ENV,n.UTILS),u=e("../../modules/abt-svc-c4s-suggested"),p=n.TRK,h=e("./c4srecentlyviewedwdg_tmpls/desk/tmpls.js"),g=n.PERSONA,v="c4s_recvwd",f=n.CACHE.storage(v),_="|",m="~",y=r.console,q=y&&y.log,w="#",k="click",C="length",E=function(){t("#c4s_wdg_checkAll").on(k,function(e){t("#c4s_varray").find(":checkbox").each(function(){t("#c4s_wdg_checkAll").prop("checked")===!0?this.checked=!0:this.checked=!1})}),t("#c4s_wdg_getpricing_btn_js").on(k,function(e){e.preventDefault();var r=t("input[type=checkbox]");if(r.filter(":checked").length>0){var n=[];t("#c4s_varray").find(":checkbox").each(function(){var e,r=t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(6).attr("value");e=r.length>6&&"undefined"!==r?!0:!1,t(this).is(":checked")?(y.log("CHECKED:  vin = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(0).attr("value")),y.log("CHECKED:  carId = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(1).attr("value")),y.log("CHECKED:  make = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(2).attr("value")),y.log("CHECKED:  model = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(3).attr("value")),y.log("CHECKED:  year = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(4).attr("value")),y.log("CHECKED:  dealerId = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(5).attr("value")),y.log("CHECKED:  dealerPhone = "+r),y.log("CHECKED:  hasValidDealerPhone = "+e),n.push({vin:t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(0).attr("value"),id:parseInt(t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(1).attr("value")),make:t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(2).attr("value"),model:t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(3).attr("value"),year:t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(4).attr("value"),dealerId:t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(5).attr("value"),dealerPhone:r,hasValidPhoneNum:e,quoteButtonSelected:!0})):(y.log("UNCHECKED:  vin = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(0).attr("value")),y.log("UNCHECKED:  carId = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(1).attr("value")),y.log("UNCHECKED:  make = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(2).attr("value")),y.log("UNCHECKED:  model = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(3).attr("value")),y.log("UNCHECKED:  year = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(4).attr("value")),y.log("UNCHECKED:  dealerId = "+t(this).parent().parent().nextAll().eq(0).children().eq(1).children().eq(5).attr("value")),y.log("UNCHECKED:  dealerPhone = "+r),y.log("UNCHECKED:  hasValidDealerPhone = "+e))}),ABT.OFR.offerPopup(n,!0)}else alert("Please select at least one vehicle")})},x=function(e){return e.inventory_count>0},b=function(){var e=f.get(v)||{sessionId:0,cars:[]},r=p.sessionCtx.session.id;return e.sessionId!==r&&(e.sessionId=r,e.cars=[]),e},A=function(e){var r=b(),t=r.cars.filter(function(r){return r.id!==e.id});t[C]<r.cars[C]&&(r.cars=t),r.cars.unshift(e),r.cars=r.cars.slice(0,5),f.set(v,r)},I=function(){var e=b();i.find("#c4s_recvwd_wdg_cars_wrap_js").empty().append(h.car_for_sale({recentsPerPage:e.cars.length,cars:e.cars}));var n=e.cars.map(function(e){return e.dealerId}),a=n.join("|");e.cars.length>0&&(t.when(u.isReady()).then(function(){s=u.inventory,c=u.criteria}),u.criteria.set({zipcode:g.get().zipcode}),u.criteria.set({vdp_price:e.cars[0].price}),u.criteria.set({vdp_mileage:e.cars[0].mileage}),u.criteria.set({exclusions:{dealers:a}}),u.criteria.set({filters:{make_models:e.cars[0].makeId+m+e.cars[0].model}}),parseInt(e.cars[0].year-1)<1?u.criteria.set({filters:{year_range:parseInt(e.cars[0].year)+_+(parseInt(e.cars[0].year)+1)}}):u.criteria.set({filters:{year_range:parseInt(e.cars[0].year)-1+_+(parseInt(e.cars[0].year)+1)}}),u.criteria.set({sort:{by:"suggested_ranking"}}),l=t.extend(!0,{},c.get()),t.when(u.query()).then(function(e){if(x(e)){d=t.extend(!0,{},e);var n=d.cars_for_sale.map(function(e){return{dealerId:e.dealer.id,vin:e.vin,id:e.id,url:r.document.location.href,imgUrl:e.primary_image_url,make:e.make,makeId:e.makeId,model:e.model,year:e.year,city:e.dealer.city,state:e.dealer.state,price:e.price,mileage:e.mileage}}),a=n.filter(function(e){return"0"!==e.mileage&&""!==e.mileage&&"0"!==e.price&&""!==e.price});a=a.slice(0,4),i.find("#c4s_recvwd_wdg_cars_wrap_js").append(h.car_for_sale({recentsPerPage:0,cars:a}))}}))},D=function(){i.empty().append(h.widget_wrap())},P=function(){E(),i.show()},S=function(){return{create:function(){n.WDG.set({c4s_viewedrecently:function(){return{init:function(e){var r=(e||{}).wrapper;if(r?r.jquery?i=r:"string"==typeof r&&(i=t(w+r)):i=t("[data-widget^=c4s-recvwd]"),!i[0])return void(q&&y.log(o.WDG_ERR_MSG));var n=b();0!==n.cars.length&&(D(),I(),P())},render:function(){return I(),this},postCar:function(e){return A(e),this}}}()})}}}();S.create()}(window,jQuery,ABT,[]._)},{"../../modules/abt-svc-c4s-suggested":3,"./c4srecentlyviewedwdg_tmpls/desk/tmpls.js":1}],3:[function(e,r,t){var n=function(e,r,t,n){var a,i,c=t.CACHE,s=t.PERSONA,l=(t.UTILS,"/api/cars-for-sale"),d=t.Eventify,o=r.isPlainObject,u=r.extend,p="change",h="ready",g=e.JSON,v=g.stringify,f=!0,_=!f,m="sugg_c4s_",y=function(){var e=new d,r=_;return{check:function(){if(!r)throw t.UTILS.SVC_ERR_MSG},set:function(t){r=t,r&&e.trigger()},on:function(t,n){t===h&&(r?n():e.register(n))}}}(),q=function(){var e=new d,r={},t=5,n=function(){i.set(q.cacheKey,r,i.permanent)},a=function(){e.trigger(r)},c=function(e,r){var t=l(e),n=l(r);return v(t)===v(n)},l=function(e){var r=[];for(var t in e){var n=e[t];r.push(t),o(n)&&(r=r.concat(l(n)))}return r.sort()};return{get:function(){return y.check(),r},set:function(e){if(y.check(),o(e)){var t=u(f,{},r,e),i=this.isValidStruct(t);return i&&(r=t,n(),a()),i}return _},reset:function(){return y.check(),r=u(f,{},this["default"],{zipcode:s.get().zipcode||""}),n(),a(),this},on:function(r,t){r===p&&e.register(t)},isValidStruct:function(e){return c(this["default"],e)},cacheKey:"criteria",defaultItemsPerPage:t,"default":{zipcode:"",vdp_price:"",vdp_mileage:"",radius_miles:100,page:{current:1,items_per_page:""},sort:{by:"suggested_ranking",dir:"asc"},exclusions:{dealers:""},filters:{price_range:"",mileage_range:"",year_range:"",make_models:""}},packTemplate:{zipcode:"z",vdp_price:"vp",vdp_mileage:"vm",radius_miles:"rm",page:{"@pname":"p",current:"c",items_per_page:"ipp"},sort:{"@pname":"s",by:"b",dir:"d"},exclusions:{"@pname":"e",dealers:"dls"},filters:{"@pname":"f",price_range:"pr",mileage_range:"mr",year_range:"yr",make_models:"mm"}}}}(),w=function(){var e=new d,r={};return{get:function(){return y.check(),r},set:function(t){y.check(),o(t)&&(r=t,e.trigger(r))},on:function(r,t){r===p&&e.register(t)}}}();return{isReady:function(){var e=r.Deferred();return r.when(c.init(),s.isReady()).then(function(){a=c.storage(m+"res"),i=c.storage(m+"req")}).then(function(){y.set(f);var r=i.get(q.cacheKey);q.isValidStruct(r)?q.set(r):q.set(q["default"]),e.resolve(n)}),e.promise()},criteria:q,serviceState:{on:y.on},inventory:{on:w.on,get:w.get},query:function(){y.check();var e=l+"/suggested/",t=3e5,i=r.Deferred(),c=q.get(),s=v(c),d="POST:"+e+s,o=a.get(d);return o?(i.resolve(o),w.set(o)):r.post(e,{"":s}).done(function(e){a.set(d,e.data,t),i.resolve(e.data),w.set(e.data)}).fail(function(){i.resolve(n)}),i.promise()}}}(window,jQuery,ABT,[]._);r.exports=n},{}]},{},[2]);