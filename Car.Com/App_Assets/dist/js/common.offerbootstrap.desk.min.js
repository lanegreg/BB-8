/*! Javascript v0.0.1 CAR.com (c)2014 - Team:http://www.car.com/humans.txt */!function e(a,s,o){function t(l,i){if(!s[l]){if(!a[l]){var r="function"==typeof require&&require;if(!i&&r)return r(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+l+"'")}var d=s[l]={exports:{}};a[l][0].call(d.exports,function(e){var s=a[l][1][e];return t(s?s:e)},d,d.exports,e,a,s,o)}return s[l].exports}for(var n="function"==typeof require&&require,l=0;l<o.length;l++)t(o[l]);return t}({1:[function(e,a,s){"use strict";!function(a,s,o){var t=o.ENV,n=t.getJsFileNameByAlias,l=t.getScriptUriByName,i=t.libsPath,r=o.PERSONA,d=/^[0-9]+$/,c="",p="",u=s("body"),f=function(){var a=s("#sidepanel_wrap_js"),t=e("./offerbootstrap_tmpls/desk/tmpls.js"),i=!1,f="click",v="relative",_="hidden",g="wide",y="ppc",m=function(){if(i){if(s("#LeadForm_NewCar_Info").css("display","none"),s("#LeadForm_PersonalInfo").removeClass("col"),s("#LeadForm_NewCar_Header").css("display","none"),s("#LeadForm_C4S_Header").text("Contact the Seller"),s("#LeadForm_C4S_Header").css("display","block"),s("#SubmitPostButton").text("Contact this Dealer").attr("data-formtype","c4s"),s("#ol_ofr_Thankyou").css("display","none"),ABT.pageJson.inventory.hasValidPhoneNum&&ABT.pageJson.inventory.dealerPhone&&10==ABT.pageJson.inventory.dealerPhone.length){var e=ABT.pageJson.inventory.dealerPhone,a="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,4);s("#c4sPhoneNum").text("Call "+a+" or Fill out the form.").css("display","block")}else s("#c4sPhoneNum").text("").css("display","none");s("#ol_Leadform").css("display","block"),s("#leadform_overlay_js").popup("show")}else{var o=n("ofrsystem");s.getCachedScript(l(o)),i=!0}},b=function(){if(i)s("#LeadForm_NewCar_Info").css("display","none"),s("#LeadForm_PersonalInfo").removeClass("col"),s("#LeadForm_NewCar_Header").css("display","none"),s("#LeadForm_C4S_Header").text("Contact the Sellers"),s("#LeadForm_C4S_Header").css("display","block"),s("#SubmitPostButton").text("Contact Dealers").attr("data-formtype","multic4s"),s("#ol_ofr_Thankyou").css("display","none"),s("#c4sPhoneNum").text("").css("display","none"),s("#ol_Leadform").css("display","block"),s("#leadform_overlay_js").popup("show");else{var e=n("ofrsystem");s.getCachedScript(l(e)),i=!0}},h=function(){var e=a.find("#offerpanel_wrap_js"),o=s(".navigation");s("#pno_btn_js").on(f,function(a){if(a.preventDefault(),!i){var o=n("ofrsystem");s.getCachedScript(l(o)),i=!0}s(".navigation").toggleClass(v),e.parent().toggleClass(_),s("#sp_Special_Offers").html().length>20&&e.toggleClass(g)}),e.find("#offerpanel_close_btn_js").on(f,function(a){a.preventDefault(),o.toggleClass(v),e.parent().toggleClass(_),e.removeClass(g)})},k=function(){var e,a,o,n="0123456789";return{init:function(){u.append(t.nav_zip_overlay()),e=s("#nav_zip_overlay_js"),a=s("#js_sitenav_zipcode_btn"),o=e.find("#nav_zip_js"),o.keyup(function(e){var a=s(this).val(),o=a.length,t="",l="";o>0&&(t=a.charAt(o-1),-1==n.indexOf(t)&&(l=a.replace(/[^0-9]+/g,""),s(this).val(l)))}),e.find("form").on("submit",function(a){var s=o.val();a.preventDefault(),null!=s&&5==s.length&&s.match(d)&&(r.set("zipcode",s),r.set({zcverified:!0}),ABT.OFR.updateNavZip(s)),e.popup("hide")}),a.on(f,function(){o.val(r.get().zipcode),e.popup("show")}),e.find(".close_btn_js").on(f,function(){e.popup("hide")})},popup:function(){o.val(r.get().zipcode),e.popup("show")}}}(),w=function(e){return null!=e&&5==e.length&&e.match(d)?void s("#js_sitenav_zipcode").text(e):void console.log("You must pass a valid zipcode to updateNavZip.")},j=function(e,a){if(!s.isArray(e)&&"object"!==s.type(e))return void console.log("You must pass an object or array of objects for first param to offerPopup().");var o=ABT.pageJson;if(o||(ABT.pageJson={},o=ABT.pageJson),a)if(s.isArray(e)&&e.length>1){o.multiInventory=[];for(var t=0;t<e.length;t++)o.multiInventory[t]={id:e[t].id,vin:e[t].vin,make:e[t].make,model:e[t].model,year:e[t].year,dealerId:e[t].dealerId,dealerPhone:e[t].dealerPhone,hasValidPhoneNum:e[t].hasValidPhoneNum,quoteButtonSelected:!0};b()}else o.inventory={id:e[0].id,make:e[0].make,model:e[0].model,year:e[0].year,dealerId:e[0].dealerId,dealerPhone:e[0].dealerPhone,hasValidPhoneNum:e[0].hasValidPhoneNum,quoteButtonSelected:!0},m()},x=function(){var e=location.hash.replace("#","").split("&"),a=[],o=[];for(var t in e){var r=e[t].split("=");2==r.length&&(a.push(r[0]),o.push(r[1]))}if(a.indexOf(y)>=0&&1==o[a.indexOf(y)]&&!i){var d=n("ofrsystem");s.getCachedScript(l(d)),i=!0}},C=function(e){s("#js_sitenav_zipcode").text(e),s("#js_sitenav_zipcode_btn").css("display","block")},L=function(e){if(null==e)return void console.log("You must pass a valid lockoutStatus.");var a=r.get(),s=a.byg;r.set({byg:{make:s.make,model:s.model,lockout:e}})},S=function(e,a){if(null==e||e.length<3||null==a||a.length<1)return void console.log("You must pass a valid make and model to update BygStruct.");var s=r.get(),o=s.byg;r.set({byg:{make:e,model:a,lockout:o.lockout}})},P=function(){var e=!1,a=null,o=10;u.append(t.add_byg_overlay({})),c=s("#byg_overlay_js"),c.popup({blur:!1,escape:!1}),p=s("#close_byg_ovl_btn_js"),p.on("click",function(e){e.preventDefault(),c.popup("hide")});var n=r.get(),l=n.zipcode,i=n.byg;s(document).mousemove(function(d){var p=d.pageY-window.pageYOffset;if(n=r.get(),l=n.zipcode,i=n.byg,!e&&o&&o>=p&&a>p&&i.make.length>2&&i.model.length>0&&5==l.length&&!i.lockout){e=!0;var u={Make:i.make,Model:i.model,Location:"",adList:""};try{var f="/api/leadengine/citystate/"+l+"/";s.get(f).done(function(e){e.data&&(u.Location=e.data[0].city+", "+e.data[0].state_abb)});var v="/api/research/getautowebads/",_="{Make: '"+i.make+"', Model: '"+i.model+"', Zip: '"+l+"', PublisherCampaignId: '560'}";s.post(v,{"":_}).done(function(e){if(e.data&&e.data.autowebadjson){var a=JSON.parse(e.data.autowebadjson);a.Listings&&a.Listings.length>0&&(u.adList=a,s("#ol_byg_AutowebAds").empty().prepend(t.overlay_byg_autoweb({adData:u})),c.popup("show"))}})}catch(g){}}a=p})},z=function(){var e=r.get(),a=e.byg;(null==a||null==a.make||null==a.model||null==a.lockout)&&r.set({byg:{make:"",model:"",lockout:!1}})},B=function(){var e=r.get(),a=e.zipcode;if(null!=a&&5==a.length&&a.match(d))C(a);else{var o="/api/geolocation/ip/";s.get(o).done(function(e){e.data&&e.data.postalcode&&5==e.data.postalcode.length&&e.data.postalcode.match(d)&&(a=e.data.postalcode,r.set({zipcode:a}),C(a))})}};return{init:function(){a.prepend(t.add_side_panel()),h(),x(),z(),B(),k.init(),P(),o.UTILS.mergeObjs(o.OFR,{offerPopup:function(e,a){j(e,a)}}),o.UTILS.mergeObjs(o.OFR,{updateNavZip:function(e){w(e)}}),o.UTILS.mergeObjs(o.OFR,{updateBygMakeModel:function(e,a){S(e,a)}}),o.UTILS.mergeObjs(o.OFR,{setBygLockout:function(e){L(e)}})}}}();s.when(s.getCachedScript(i+"/"+n("popup")),r.isReady()).then(function(){f.init()})}(window,jQuery,ABT)},{"./offerbootstrap_tmpls/desk/tmpls.js":2}],2:[function(e,a,s){a.exports.add_byg_overlay=function(e){var a='<div id="byg_overlay_js" class="overlay byg-bg-b" style="display:none"> <button type="button" id="close_byg_ovl_btn_js" class="overlay-close" data-omnitarget="leadpop:closebtn"> <span class="icon"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span> </button> <div class="dead-middle"> <section class="leadform-thx-cont" id="ol_byg_section" style="display: block"> <div class="row inner-cont"> <div class="aw-feed-cont" id="ol_byg_AutowebAds" style="display: block"></div> </div> </section> </div></div>';return a},a.exports.add_side_panel=function(e){var a='<aside id="offerpanel_wrap_js" class="side-panel"> <a href="" id="offerpanel_close_btn_js"> <span class="overlay-close"> <span class="icon"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span> </span> </a> <div class="side-panel-inner-cont" id="sp_Parent"> <div class="col1"> <section id="sp_c4s_Lead" style="display: none;"> <p> <a href="" class="btn-primary lg js_sp_contact_dealer_btn" style="width: 225px;"> Contact the Seller </a> </p> <div id="sp_c4s_offer_links"></div> </section> <section id="sp_NewCar_Lead"> </section> <section id="sp_OfferZip" style="display: none;"> <hr />  <p> <span> Enter your zipcode for additional offers<br /> </span> <label> <input type="text" id="offersZipcode" name="offersZipcode" class="full js_offers_zipcode" pattern="[0-9]*" placeholder="ZIP Code" value="" maxlength="5" /> </label> </p> <p> <span id="offersZipErrorMessage" class="error" style="display: none;"> You must enter a valid ZIP Code<br /> </span> <button id="SetOffersZip" class="btn-primary block">See Offers</button> </p> </section> <section id="sp_c4s_inventory_link" style="display: none;"> </section> </div> <div class="col2"> <section class="special-offers" id="sp_Special_Offers" style="display: none;"> </section> </div> </div></aside>';return a},a.exports.nav_zip_overlay=function(e){var a='<div id="nav_zip_overlay_js" class="overlay overlay-dk max-450" style="display:none"> <button class="close_btn_js overlay-close"> <span class="icon"> <svg> <use xlink:href="/assets/svg/global-sprite.svg#i_close"></use> </svg> </span> </button> <div class="dead-middle"> <div class="form center"> <h1 class="h1">Update Zip Code</h1> <form class="car-form"> <p> <input id="nav_zip_js" type="text" placeholder="99999" class="sm lg-text" pattern="[0-9]{5}" required /> </p> <p> <button class="query_btn_js btn-primary block lg">Update</button> </p> </form> </div> </div></div>';return a},a.exports.overlay_byg_autoweb=function(e){var a=' <section id="v-b"> <h1 id="awBygMessage" class="hdr-cont"> <span class="byg">Before You Go!</span> <span class="h3">Get the Best Price on a new '+e.adData.Make+" "+e.adData.Model+" in "+e.adData.Location+'.</span> </h1> <ul class="aw-feed-list"> ',s=e.adData.adList.Listings;if(s)for(var o,t=-1,n=s.length-1;n>t;)o=s[t+=1],a+=" ",5>t&&(a+=' <li class="aw-feed-item"> <a href="'+o.LandingUrl+'" data-omnitarget="leadpop:autoweb" data-omnicallback="trackAutoweb" target="_blank"> <div class="col-thumb"> <img src="'+o.LogoUrl+'" /> </div> <div class="col-desc"> <h3 class="header">'+o.Title+"</h3> <p> <span>"+o.Description1+"</span> <br /> <span>",o.Description2&&(a+=""+o.Description2),a+='</span> <br /> <span class="aw-url aw_url_js">'+o.DisplayUrl+'</span> </p> </div> <div class="col-btn"> <button class="btn-secondary lg">Get Quote <span class="icon inline"> <svg> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/svg/global-sprite.svg#i_arrow3_r"></use> </svg> </span> </button> </div> </a> </li> '),a+=" ";return a+=" </ul></section>"}},{}]},{},[1]);