/*!
 * jQuery Popup Overlay
 *
 * @version 1.7.4
 * @requires jQuery v1.7.1+
 * @link http://vast-engineering.github.com/jquery-popup-overlay/
 */
(function(n){var c=n(window),u=n("body"),at={},l=[],w=[],vt,ft=null,yt="_open",ri="_close",r=[],pt=null,wt,bt=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),f=document,b=f.body.style,e=setTimeout,a=parseInt,ui=parseFloat,k="html",d="aria-hidden",fi="aria-labelledby",ei="inline-block",o="hidden",v="visible",kt="absolute",oi="relative",si="overflow",g="overlay",et="middle",ot="center",nt="top",st="bottom",ht="right",y="left",ct="edge",dt="data-",hi="margin-right",ci="text-align",li="vertical-align",lt="popup-initialized",p="popup_visible",tt="popup-visible",it="popup-ordinal",ai="popup_align",t="popupoptions",gt="popup_content_visible",vi="tooltip",ni="transition",yi="transitionend",s="_background",rt="_wrapper",ti="focus",pi="fixed",ii="z-index",ut="100%",i={_init:function(r){var u=n(r),f=u.data(t);w[r.id]=!1;l[r.id]=0;u.data(lt)||(u.attr(dt+lt,"true"),i._initonce(r));f.autoopen&&e(function(){i.show(r,0)},0)},_initonce:function(r){var c=n(r),l,h=c.data(t),w,nt,tt,k,p;if(ft=a(u.css(hi),10),pt=b.webkitTransition!==undefined||b.MozTransition!==undefined||b.msTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined,h.type==vi&&(h.background=!1,h.scrolllock=!1),h.backgroundactive&&(h.background=!1,h.blur=!1,h.scrolllock=!1),h.scrolllock&&typeof vt=="undefined"&&(nt=n('<div style="width:50px;height:50px;overflow:auto"><div/><\/div>').appendTo("body"),tt=nt.children(),vt=tt.innerWidth()-tt.height(99).innerWidth(),nt.remove()),c.attr("id")||c.attr("id","j-popup-"+a(Math.random()*1e8,10)),c.addClass("popup_content"),u.prepend(r),c.wrap('<div id="'+r.id+rt+'" class="popup_wrapper" />'),l=n("#"+r.id+rt),l.css({opacity:0,visibility:o,position:kt}),bt&&l.css("cursor","pointer"),h.type==g&&l.css(si,"auto"),c.css({opacity:0,visibility:o,display:ei}),h.setzindex&&!h.autozindex&&l.css(ii,"100001"),h.outline||c.css("outline","none"),h.transition&&(c.css(ni,h.transition),l.css(ni,h.transition)),c.attr(d,!0),h.background&&!n("#"+r.id+s).length&&(u.prepend('<div id="'+r.id+s+'" class="popup'+s+'"><\/div>'),k=n("#"+r.id+s),k.css({opacity:0,visibility:o,backgroundColor:h.color,position:pi,top:0,right:0,bottom:0,left:0}),h.setzindex&&!h.autozindex&&k.css(ii,"100000"),h.transition&&k.css(ni,h.transition)),h.type==g&&(c.css({textAlign:y,position:oi,verticalAlign:et}),w=bt?{position:kt,width:ut,height:ut,top:0,left:0,textAlign:ot}:{position:pi,width:ut,height:ut,top:0,left:0,textAlign:ot},h.backgroundactive&&(w.position=oi,w.height="0",w.overflow=v),l.css(w),l.append('<div class="'+ai+'" />'),n("."+ai).css({display:ei,verticalAlign:et,height:ut})),c.attr("role","dialog"),p=h.openelement?h.openelement:"."+r.id+yt,n(p).each(function(t,i){n(i).attr(dt+it,t);i.id||n(i).attr("id","open_"+a(Math.random()*1e8,10))}),c.attr(fi)||c.attr("aria-label")||c.attr(fi,n(p).attr("id")),h.action=="hover"){h.keepfocus=!1;n(p).on("mouseenter",function(){i.show(r,n(this).data(it))});n(p).on("mouseleave",function(){i.hide(r)})}else n(f).on("click",p,function(t){t.preventDefault();var u=n(this).data(it);e(function(){i.show(r,u)},0)});h.detach?c.hide().detach():l.hide()},show:function(y,b){var nt=n(y),et,it;if(bt&&u.addClass("noscroll"),!nt.data(tt)){nt.data(lt)||i._init(y);nt.attr(dt+lt,"true");var g=nt.data(t),ut=n("#"+y.id+rt),st=n("#"+y.id+s);if(h(y,b,g.beforeopen),w[y.id]=b,e(function(){r.push(y.id)},0),g.autozindex){var ht=f.getElementsByTagName("*"),ct=ht.length,ot=0;for(et=0;et<ct;et++)it=n(ht[et]).css(ii),it!=="auto"&&(it=a(it,10),ot<it&&(ot=it));l[y.id]=ot;g.background&&l[y.id]>0&&n("#"+y.id+s).css({zIndex:l[y.id]+1});l[y.id]>0&&ut.css({zIndex:l[y.id]+2})}if(g.detach?(ut.prepend(y),nt.show()):ut.show(),wt=e(function(){ut.css({visibility:v,opacity:1});n(k).addClass(p).addClass(p="_"+y.id);nt.addClass(gt)},20),g.scrolllock&&(u.css(si,o),u.height()>c.height()&&u.css(hi,ft+vt)),g.backgroundactive&&nt.css({top:(c.height()-(nt.get(0).offsetHeight+a(nt.css("margin-top"),10)+a(nt.css("margin-bottom"),10)))/2+"px"}),nt.css({visibility:v,opacity:1}),g.background&&(st.css({visibility:v,opacity:g.opacity}),e(function(){st.css({opacity:g.opacity})},0)),nt.data(tt,!0),i.reposition(y,b),nt.data("focusedelementbeforepopup",f.activeElement),g.keepfocus&&(nt.attr("tabindex",-1),e(function(){g.focuselement==="closebutton"?n("#"+y.id+" ."+y.id+ri+":first").trigger(ti):g.focuselement?n(g.focuselement).trigger(ti):nt.trigger(ti)},g.focusdelay)),n(g.pagecontainer).attr(d,!0),nt.attr(d,!1),h(y,b,g.onopen),pt)ut.one(yi,function(){h(y,b,g.opentransitionend)});else h(y,b,g.opentransitionend)}},hide:function(i){wt&&clearTimeout(wt);u.removeClass("noscroll");var f=n(i),c=f.data(t),l=n("#"+i.id+rt),a=n("#"+i.id+s);if(f.data(tt,!1),r.length===1?n(k).removeClass(p).removeClass(p+"_"+i.id):n(k).hasClass(p+"_"+i.id)&&n(k).removeClass(p+"_"+i.id),r.pop(),n(k).hasClass(gt)&&f.removeClass(gt),l.css({visibility:o,opacity:0}),f.css({visibility:o,opacity:0}),c.background&&a.css({visibility:o,opacity:0}),n(c.pagecontainer).attr(d,!1),f.attr(d,!0),h(i,w[i.id],c.onclose),pt&&f.css("transition-duration")!=="0s")f.one(yi,function(){f.data(tt)||(c.detach?f.hide().detach():l.hide());c.scrolllock&&e(function(){u.css({overflow:v,"margin-right":ft})},10);h(i,w[i.id],c.closetransitionend)});else c.detach?f.hide().detach():l.hide(),c.scrolllock&&e(function(){u.css({overflow:v,"margin-right":ft})},10),h(i,w[i.id],c.closetransitionend)},toggle:function(t,r){n(t).data(tt)?i.hide(t):e(function(){i.show(t,r)},0)},reposition:function(i,r){var s=n(i),u=s.data(t),f=n("#"+i.id+rt),o,h,e;r=r||0;u.type==vi?(f.css({position:kt}),h="[data-"+it+'="'+r+'"]',o=u.tooltipanchor?n(u.tooltipanchor):u.openelement?n(u.openelement).filter(h):n("."+i.id+yt+h),e=o.offset(),u.horizontal==ht?f.css(y,e.left+o.outerWidth()+u.offsetleft):u.horizontal==y+ct?f.css(y,e.left+o.outerWidth()-o.outerWidth()+u.offsetleft):u.horizontal==y?f.css(ht,c.width()-e.left-u.offsetleft):u.horizontal==ht+ct?f.css(ht,c.width()-e.left-o.outerWidth()-u.offsetleft):f.css(y,e.left+o.outerWidth()/2-s.outerWidth()/2-ui(s.css("marginLeft"))+u.offsetleft),u.vertical==st?f.css(nt,e.top+o.outerHeight()+u.offsettop):u.vertical==st+ct?f.css(nt,e.top+o.outerHeight()-s.outerHeight()+u.offsettop):u.vertical==nt?f.css(st,c.height()-e.top-u.offsettop):u.vertical==nt+ct?f.css(st,c.height()-e.top-s.outerHeight()-u.offsettop):f.css(nt,e.top+o.outerHeight()/2-s.outerHeight()/2-ui(s.css("marginTop"))+u.offsettop)):u.type==g&&(u.horizontal?f.css(ci,u.horizontal):f.css(ci,ot),u.vertical?s.css(li,u.vertical):s.css(li,et))}},h=function(i,r,u){var f=n(i).data(t),e=f.openelement?f.openelement:"."+i.id+yt,o=n(e+"[data-"+it+'="'+r+'"]');typeof u=="function"&&u.call(n(i),i,o)};n(f).on("keydown",function(u){if(r.length){var o=r[r.length-1],e=f.getElementById(o);n(e).data(t).escape&&u.keyCode==27&&i.hide(e)}});n(f).on("click",function(u){if(r.length){var o=r[r.length-1],e=f.getElementById(o),s=n(e).data(t).closeelement?n(e).data(t).closeelement:"."+e.id+ri;n(u.target).closest(s).length&&(u.preventDefault(),i.hide(e));n(e).data(t).blur&&!n(u.target).closest("#"+o).length&&u.which!==2&&(i.hide(e),n(e).data(t).type===g&&u.preventDefault())}});n(f).on("focusin",function(i){if(r.length){var e=r[r.length-1],u=f.getElementById(e);n(u).data(t).keepfocus&&(u.contains(i.target)||(i.stopPropagation(),u.focus()))}});n.fn.popup=function(r){return this.each(function(){var u=n(this),f;typeof r=="object"?(f=n.extend({},n.fn.popup.defaults,r),u.data(t,f),at=u.data(t),i._init(this)):typeof r=="string"?(u.data(t)||(u.data(t,n.fn.popup.defaults),at=u.data(t)),i[r].call(this,this)):(u.data(t)||(u.data(t,n.fn.popup.defaults),at=u.data(t)),i._init(this))})};n.fn.popup.defaults={type:g,autoopen:!1,background:!0,backgroundactive:!1,color:"black",opacity:"0.5",horizontal:ot,vertical:et,offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}})(jQuery);
//# sourceMappingURL=popup-1.7.4.min.js.map
